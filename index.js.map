{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst form = document.getElementById('search-form');\nconst gallery = document.getElementById('gallery');\nconst loadMoreBtn = document.getElementById('load-more');\n\nlet page = 1;\nconst perPage = 40;\nlet totalHits = 0;\nlet apiKey = '19490895-43525fbfea01be26fe968a218';\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    page = 1;\n    gallery.innerHTML = '';\n    loadMoreBtn.style.display = 'none';\n    await fetchImages();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n    page++;\n    await fetchImages();\n\n    const loader = document.createElement('div');\n    loader.className = 'loader';\n    document.body.appendChild(loader);\n\n    const scroll = document.querySelector(\".gallery-item\").getBoundingClientRect().height * 2;\n    window.scrollBy({\n        left: 0,\n        top: scroll * 2,\n        behavior: 'smooth'\n    });\n\n    loader.remove();\n});\n\nasync function fetchImages() {\n    const query = document.getElementById('search').value;\n    const apiUrl = `https://pixabay.com/api/?key=${apiKey}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        gallery.innerHTML += '<div class=\"loader\"></div>';\n        const response = await axios.get(apiUrl);\n        const data = await response.data;\n\n        if (data.hits.length > 0) {\n            document.querySelector('.loader').remove();\n            totalHits = data.totalHits;\n            displayImages(data.hits);\n\n            const lightbox = new SimpleLightbox('#gallery a');\n            lightbox.refresh();\n\n            if (gallery.children.length >= totalHits) {\n                loadMoreBtn.style.display = 'none';\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results\",\n                    messageSize: 14,\n                    messageColor: \"#333333\",\n                    position: \"bottomLeft\",\n                });\n            } else {\n                loadMoreBtn.style.display = 'block';\n            }\n\n        } else {\n            iziToast.error({\n                title: 'No Results',\n                message: 'No images found for your search. Please try another keyword.',\n            });\n            document.querySelector('.loader').remove();\n        }\n    } catch (error) {\n        console.error('Error fetching images:', error);\n\n        iziToast.error({\n            title: 'Error',\n            message: 'Something went wrong. Please try again.',\n        });\n    }\n}\n\nfunction displayImages(images) {\n    images.forEach(image => {\n        gallery.innerHTML += `\n            <li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                    <img class=\"gallery-image\" src=\"${image.largeImageURL}\" alt=\"${image.tags}\" title=\"${image.tags}\">\n                </a>\n                <div class=\"image-captions\">\n                    <div class=\"image-caption-datas\">\n                        <p class=\"img-caption-head\">Views</p>\n                        <p class=\"img-caption-value\">${image.views}</p>\n                    </div>\n                    <div class=\"image-caption-datas\">\n                        <p class=\"img-caption-head\">Downloads</p>\n                        <p class=\"img-caption-value\">${image.downloads}</p>\n                    </div>\n                    <div class=\"image-caption-datas\">\n                        <p class=\"img-caption-head\">Likes</p>\n                        <p class=\"img-caption-value\">${image.likes}</p>\n                    </div>\n                    <div class=\"image-caption-datas\">\n                        <p class=\"img-caption-head\">Comments</p>\n                        <p class=\"img-caption-value\">${image.comments}</p>\n                    </div>\n                </div>\n            </li>\n        `;\n    });\n}"],"names":["form","gallery","loadMoreBtn","page","perPage","totalHits","apiKey","event","fetchImages","loader","scroll","query","apiUrl","data","axios","displayImages","SimpleLightbox","iziToast","error","images","image"],"mappings":"owBAMA,MAAMA,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAU,SAAS,eAAe,SAAS,EAC3CC,EAAc,SAAS,eAAe,WAAW,EAEvD,IAAIC,EAAO,EACX,MAAMC,EAAU,GAChB,IAAIC,EAAY,EACZC,EAAS,qCAEbN,EAAK,iBAAiB,SAAU,MAAOO,GAAU,CAC7CA,EAAM,eAAc,EACpBJ,EAAO,EACPF,EAAQ,UAAY,GACpBC,EAAY,MAAM,QAAU,OAC5B,MAAMM,EAAW,CACrB,CAAC,EAEDN,EAAY,iBAAiB,QAAS,SAAY,CAC9CC,IACA,MAAMK,EAAW,EAEjB,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,SACnB,SAAS,KAAK,YAAYA,CAAM,EAEhC,MAAMC,EAAS,SAAS,cAAc,eAAe,EAAE,sBAAuB,EAAC,OAAS,EACxF,OAAO,SAAS,CACZ,KAAM,EACN,IAAKA,EAAS,EACd,SAAU,QAClB,CAAK,EAEDD,EAAO,OAAM,CACjB,CAAC,EAED,eAAeD,GAAc,CACzB,MAAMG,EAAQ,SAAS,eAAe,QAAQ,EAAE,MAC1CC,EAAS,gCAAgCN,CAAM,MAAM,mBAAmBK,CAAK,CAAC,iEAAiER,CAAI,aAAaC,CAAO,GAE7K,GAAI,CACAH,EAAQ,WAAa,6BAErB,MAAMY,EAAO,MADI,MAAMC,EAAM,IAAIF,CAAM,GACX,KAExBC,EAAK,KAAK,OAAS,GACnB,SAAS,cAAc,SAAS,EAAE,OAAM,EACxCR,EAAYQ,EAAK,UACjBE,EAAcF,EAAK,IAAI,EAEN,IAAIG,EAAe,YAAY,EACvC,QAAO,EAEZf,EAAQ,SAAS,QAAUI,GAC3BH,EAAY,MAAM,QAAU,OAC5Be,EAAS,KAAK,CACV,QAAS,4DACT,YAAa,GACb,aAAc,UACd,SAAU,YAC9B,CAAiB,GAEDf,EAAY,MAAM,QAAU,UAIhCe,EAAS,MAAM,CACX,MAAO,aACP,QAAS,8DACzB,CAAa,EACD,SAAS,cAAc,SAAS,EAAE,OAAM,EAE/C,OAAQC,EAAO,CACZ,QAAQ,MAAM,yBAA0BA,CAAK,EAE7CD,EAAS,MAAM,CACX,MAAO,QACP,QAAS,yCACrB,CAAS,CACJ,CACL,CAEA,SAASF,EAAcI,EAAQ,CAC3BA,EAAO,QAAQC,GAAS,CACpBnB,EAAQ,WAAa;AAAA;AAAA,gDAEmBmB,EAAM,aAAa;AAAA,sDACbA,EAAM,aAAa,UAAUA,EAAM,IAAI,YAAYA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,uDAK5DA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uDAIXA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,uDAIfA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,uDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,SAKrE,CAAK,CACL"}